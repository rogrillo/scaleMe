(function(a){a.fn.scaleMe=function(b){var c={fadeSpeed:500,fade:false,container:null,position:"relative",onLoad:null,onError:null,onLoadAll:null},d=this.length,e=0;this.hide();return this.each(function(){var f=this.src,g=a(this);e++;if(b){a.extend(c,b)}var h=function(){if(c.onLoad&&typeof c.onLoad==="function"){c.onLoad(g)}var a=c.container?c.container:g.parent(),b=g.width(),d=g.height(),e=a.width(),f=a.height();g.appendTo(a);if(d>f&&b>e){g.css({maxHeight:"100%",maxWidth:"100%"})}else if(d>f){g.css({maxHeight:"100%"})}else if(b>e){g.css({maxWidth:"100%"})}if(c.fade){g.fadeIn(c.fadeSpeed)}else{g.show()}g.css({position:c.position,top:"50%",left:"50%",marginLeft:g.width()/2*-1,marginTop:g.height()/2*-1})};g.bind("load",h);this.src=f;if(!this.complete){var i=this,j=setInterval(function(){if(i.complete){h();clearInterval(j)}},500)}g.bind("error",function(){if(c.onError&&typeof c.onError==="function"){c.onError(g)}});if(e===d&&c.onLoadAll&&typeof c.onLoadAll==="function"){c.onLoadAll()}})}})(jQuery)